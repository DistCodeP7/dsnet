<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# dsnet

```go
import "github.com/distcode/dsnet/dsnet"
```

## Index

- [func On\[T any\]\(d \*DSNet, operation string, handler HandlerFunc\[T\]\)](<#On>)
- [type DSNet](<#DSNet>)
  - [func Connect\(controllerAddr, nodeID string\) \(\*DSNet, error\)](<#Connect>)
  - [func ConnectWithContext\(ctx context.Context, controllerAddr, nodeId string\) \(\*DSNet, error\)](<#ConnectWithContext>)
  - [func \(d \*DSNet\) Broadcast\(payload any, operation string\) error](<#DSNet.Broadcast>)
  - [func \(d \*DSNet\) Close\(\) error](<#DSNet.Close>)
  - [func \(d \*DSNet\) GetNodeID\(\) string](<#DSNet.GetNodeID>)
  - [func \(d \*DSNet\) Publish\(group string, payload any, operation string\) error](<#DSNet.Publish>)
  - [func \(d \*DSNet\) Send\(to string, payload any, operation string\) error](<#DSNet.Send>)
  - [func \(d \*DSNet\) Subscribe\(group string\) error](<#DSNet.Subscribe>)
  - [func \(d \*DSNet\) Unsubscribe\(group string\) error](<#DSNet.Unsubscribe>)
- [type HandlerFunc](<#HandlerFunc>)


<a name="On"></a>
## func [On](<https://github.com/DistCodeP7/dsnet/blob/master/dsnet/handler.go#L14>)

```go
func On[T any](d *DSNet, operation string, handler HandlerFunc[T])
```

On registers a type\-safe handler for a specific operation on a DSNet instance.

<a name="DSNet"></a>
## type [DSNet](<https://github.com/DistCodeP7/dsnet/blob/master/dsnet/dsnet.go#L21-L33>)

\* DSNet provides a simple interface for nodes to communicate via a central controller. \* Nodes can send direct messages, broadcast messages, and publish to groups. \* Each node maintains an inbox channel for incoming messages.

```go
type DSNet struct {
    Inbox chan *pb.Envelope
    // contains filtered or unexported fields
}
```

<a name="Connect"></a>
### func [Connect](<https://github.com/DistCodeP7/dsnet/blob/master/dsnet/dsnet.go#L39>)

```go
func Connect(controllerAddr, nodeID string) (*DSNet, error)
```



<a name="ConnectWithContext"></a>
### func [ConnectWithContext](<https://github.com/DistCodeP7/dsnet/blob/master/dsnet/dsnet.go#L44>)

```go
func ConnectWithContext(ctx context.Context, controllerAddr, nodeId string) (*DSNet, error)
```

ConnectWithContext connects a node to the controller with a context.

<a name="DSNet.Broadcast"></a>
### func \(\*DSNet\) [Broadcast](<https://github.com/DistCodeP7/dsnet/blob/master/dsnet/messaging.go#L26>)

```go
func (d *DSNet) Broadcast(payload any, operation string) error
```

Broadcast sends a message to all nodes.

<a name="DSNet.Close"></a>
### func \(\*DSNet\) [Close](<https://github.com/DistCodeP7/dsnet/blob/master/dsnet/dsnet.go#L90>)

```go
func (d *DSNet) Close() error
```



<a name="DSNet.GetNodeID"></a>
### func \(\*DSNet\) [GetNodeID](<https://github.com/DistCodeP7/dsnet/blob/master/dsnet/dsnet.go#L35>)

```go
func (d *DSNet) GetNodeID() string
```



<a name="DSNet.Publish"></a>
### func \(\*DSNet\) [Publish](<https://github.com/DistCodeP7/dsnet/blob/master/dsnet/messaging.go#L45>)

```go
func (d *DSNet) Publish(group string, payload any, operation string) error
```

Publish sends a message to a group.

<a name="DSNet.Send"></a>
### func \(\*DSNet\) [Send](<https://github.com/DistCodeP7/dsnet/blob/master/dsnet/messaging.go#L6>)

```go
func (d *DSNet) Send(to string, payload any, operation string) error
```

Send sends a direct message to a single node.

<a name="DSNet.Subscribe"></a>
### func \(\*DSNet\) [Subscribe](<https://github.com/DistCodeP7/dsnet/blob/master/dsnet/messaging.go#L67>)

```go
func (d *DSNet) Subscribe(group string) error
```

Subscribe subscribes the node to a group.

<a name="DSNet.Unsubscribe"></a>
### func \(\*DSNet\) [Unsubscribe](<https://github.com/DistCodeP7/dsnet/blob/master/dsnet/messaging.go#L79>)

```go
func (d *DSNet) Unsubscribe(group string) error
```

Unsubscribe unsubscribes the node from a group.

<a name="HandlerFunc"></a>
## type [HandlerFunc](<https://github.com/DistCodeP7/dsnet/blob/master/dsnet/handler.go#L11>)



```go
type HandlerFunc[T any] func(ctx context.Context, from string, msg T) error
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
