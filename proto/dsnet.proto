syntax = "proto3";

package dsnet;
option go_package = "github.com/distcodep7/dsnet/proto";

service NetworkController {
  rpc Stream(stream Envelope) returns (stream Envelope);
}

// Key-value style for vector clocks
message VectorClockEntry {
  string node = 1;
  uint64 counter = 2;
}

message Envelope {
  string from = 1;
  string to = 2;
  string type = 3;
  string payload = 4;
  repeated VectorClockEntry vector = 5;
  string id = 6;
}
